// This file is automatically generated by Keystone, do not modify it manually.
// Modify your Keystone config when you want to change this.

datasource postgresql {
  url               = env("DATABASE_URL")
  shadowDatabaseUrl = env("SHADOW_DATABASE_URL")
  provider          = "postgresql"
}

generator client {
  provider = "prisma-client-js"
}

model User {
  id                              Int                @id @default(autoincrement())
  name                            String             @default("")
  email                           String             @unique @default("")
  password                        String
  role                            String
  officialAccounts                OfficialMapping[]  @relation("OfficialMapping_cmsUser")
  isProtected                     Boolean            @default(false)
  passwordUpdatedAt               DateTime?          @default(now())
  mustChangePassword              Boolean            @default(false)
  loginFailedAttempts             Int?               @default(0)
  accountLockedUntil              DateTime?
  lastFailedLoginAt               DateTime?
  passwordHistory                 Json?
  passwordResetToken              String?
  passwordResetIssuedAt           DateTime?
  passwordResetRedeemedAt         DateTime?
  from_Member_createdBy           Member[]           @relation("Member_createdBy")
  from_Member_updatedBy           Member[]           @relation("Member_updatedBy")
  from_OfficialMapping_createdBy  OfficialMapping[]  @relation("OfficialMapping_createdBy")
  from_OfficialMapping_updatedBy  OfficialMapping[]  @relation("OfficialMapping_updatedBy")
  from_Post_createdBy             Post[]             @relation("Post_createdBy")
  from_Post_updatedBy             Post[]             @relation("Post_updatedBy")
  from_Topic_createdBy            Topic[]            @relation("Topic_createdBy")
  from_Topic_updatedBy            Topic[]            @relation("Topic_updatedBy")
  from_EditorChoice_createdBy     EditorChoice[]     @relation("EditorChoice_createdBy")
  from_EditorChoice_updatedBy     EditorChoice[]     @relation("EditorChoice_updatedBy")
  from_LifeGuide_createdBy        LifeGuide[]        @relation("LifeGuide_createdBy")
  from_LifeGuide_updatedBy        LifeGuide[]        @relation("LifeGuide_updatedBy")
  from_Comment_createdBy          Comment[]          @relation("Comment_createdBy")
  from_Comment_updatedBy          Comment[]          @relation("Comment_updatedBy")
  from_Reaction_createdBy         Reaction[]         @relation("Reaction_createdBy")
  from_Reaction_updatedBy         Reaction[]         @relation("Reaction_updatedBy")
  from_Bookmark_createdBy         Bookmark[]         @relation("Bookmark_createdBy")
  from_Bookmark_updatedBy         Bookmark[]         @relation("Bookmark_updatedBy")
  from_Poll_createdBy             Poll[]             @relation("Poll_createdBy")
  from_Poll_updatedBy             Poll[]             @relation("Poll_updatedBy")
  from_PollOption_createdBy       PollOption[]       @relation("PollOption_createdBy")
  from_PollOption_updatedBy       PollOption[]       @relation("PollOption_updatedBy")
  from_PollVote_createdBy         PollVote[]         @relation("PollVote_createdBy")
  from_PollVote_updatedBy         PollVote[]         @relation("PollVote_updatedBy")
  from_Content_createdBy          Content[]          @relation("Content_createdBy")
  from_Content_updatedBy          Content[]          @relation("Content_updatedBy")
  from_Report_createdBy           Report[]           @relation("Report_createdBy")
  from_Report_updatedBy           Report[]           @relation("Report_updatedBy")
  from_ForbiddenKeyword_createdBy ForbiddenKeyword[] @relation("ForbiddenKeyword_createdBy")
  from_ForbiddenKeyword_updatedBy ForbiddenKeyword[] @relation("ForbiddenKeyword_updatedBy")
  from_Video_createdBy            Video[]            @relation("Video_createdBy")
  from_Video_updatedBy            Video[]            @relation("Video_updatedBy")
  from_Photo_createdBy            Photo[]            @relation("Photo_createdBy")
  from_Photo_updatedBy            Photo[]            @relation("Photo_updatedBy")
  from_Category_createdBy         Category[]         @relation("Category_createdBy")
  from_Category_updatedBy         Category[]         @relation("Category_updatedBy")
  from_Tag_createdBy              Tag[]              @relation("Tag_createdBy")
  from_Tag_updatedBy              Tag[]              @relation("Tag_updatedBy")
}

model Member {
  id                                  Int                 @id @default(autoincrement())
  firebaseId                          String              @unique @default("")
  customId                            String              @unique @default("")
  name                                String              @default("")
  nickname                            String              @default("")
  avatar                              String              @default("")
  intro                               String              @default("")
  avatar_image                        Photo?              @relation("Member_avatar_image", fields: [avatar_imageId], references: [id])
  avatar_imageId                      Int?                @map("avatar_image")
  email                               String              @unique @default("")
  is_active                           Boolean             @default(true)
  verified                            Boolean             @default(false)
  comment                             Comment[]           @relation("Comment_member")
  member_like                         Comment[]           @relation("Comment_like")
  posts                               Post[]              @relation("Post_author")
  reactions                           Reaction[]          @relation("Reaction_member")
  follower                            Member[]            @relation("Member_follower")
  following                           Member[]            @relation("Member_follower")
  block                               Member[]            @relation("Member_block")
  blocked                             Member[]            @relation("Member_block")
  following_category                  Category[]          @relation("Member_following_category")
  isOfficial                          Boolean             @default(false)
  status                              MemberStatusType?   @default(active)
  joinDate                            DateTime?           @default(now())
  language                            MemberLanguageType? @default(zh)
  createdAt                           DateTime?
  updatedAt                           DateTime?
  createdBy                           User?               @relation("Member_createdBy", fields: [createdById], references: [id])
  createdById                         Int?                @map("createdBy")
  updatedBy                           User?               @relation("Member_updatedBy", fields: [updatedById], references: [id])
  updatedById                         Int?                @map("updatedBy")
  from_OfficialMapping_officialMember OfficialMapping[]   @relation("OfficialMapping_officialMember")
  from_Bookmark_member                Bookmark[]          @relation("Bookmark_member")
  from_PollVote_member                PollVote[]          @relation("PollVote_member")
  from_Report_reporter                Report[]            @relation("Report_reporter")
  from_Photo_uploadedBy               Photo[]             @relation("Photo_uploadedBy")

  @@index([avatar_imageId])
  @@index([createdById])
  @@index([updatedById])
}

model OfficialMapping {
  id               Int       @id @default(autoincrement())
  cmsUser          User?     @relation("OfficialMapping_cmsUser", fields: [cmsUserId], references: [id])
  cmsUserId        Int?      @map("cmsUser")
  officialMember   Member?   @relation("OfficialMapping_officialMember", fields: [officialMemberId], references: [id])
  officialMemberId Int?      @map("officialMember")
  note             String    @default("")
  createdAt        DateTime?
  updatedAt        DateTime?
  createdBy        User?     @relation("OfficialMapping_createdBy", fields: [createdById], references: [id])
  createdById      Int?      @map("createdBy")
  updatedBy        User?     @relation("OfficialMapping_updatedBy", fields: [updatedById], references: [id])
  updatedById      Int?      @map("updatedBy")

  @@index([cmsUserId])
  @@index([officialMemberId])
  @@index([createdById])
  @@index([updatedById])
}

model Post {
  id                     Int               @id @default(autoincrement())
  title                  String            @default("")
  content                String            @default("")
  language               PostLanguageType?
  content_zh             String            @default("")
  content_en             String            @default("")
  content_vi             String            @default("")
  content_id             String            @default("")
  content_th             String            @default("")
  author                 Member?           @relation("Post_author", fields: [authorId], references: [id])
  authorId               Int?              @map("author")
  ip                     String            @default("")
  topic                  Topic?            @relation("Post_topic", fields: [topicId], references: [id])
  topicId                Int?              @map("topic")
  status                 PostStatusType?   @default(draft)
  heroImage              Photo?            @relation("Post_heroImage", fields: [heroImageId], references: [id])
  heroImageId            Int?              @map("heroImage")
  comments               Comment[]         @relation("Comment_post")
  reactions              Reaction[]        @relation("Reaction_post")
  reports                Report[]          @relation("Report_post")
  createdAt              DateTime?
  updatedAt              DateTime?
  createdBy              User?             @relation("Post_createdBy", fields: [createdById], references: [id])
  createdById            Int?              @map("createdBy")
  updatedBy              User?             @relation("Post_updatedBy", fields: [updatedById], references: [id])
  updatedById            Int?              @map("updatedBy")
  from_EditorChoice_post EditorChoice[]    @relation("EditorChoice_post")
  from_LifeGuide_post    LifeGuide[]       @relation("LifeGuide_post")
  from_Bookmark_post     Bookmark[]        @relation("Bookmark_post")
  from_Poll_post         Poll[]            @relation("Poll_post")

  @@index([authorId])
  @@index([topicId])
  @@index([heroImageId])
  @@index([createdById])
  @@index([updatedById])
}

model Topic {
  id          Int                @id @default(autoincrement())
  name        String             @default("")
  language    TopicLanguageType?
  name_zh     String             @default("")
  name_en     String             @default("")
  name_vi     String             @default("")
  name_id     String             @default("")
  name_th     String             @default("")
  slug        String             @unique @default("")
  sortOrder   Int?               @default(0)
  description String             @default("")
  posts       Post[]             @relation("Post_topic")
  createdAt   DateTime?
  updatedAt   DateTime?
  createdBy   User?              @relation("Topic_createdBy", fields: [createdById], references: [id])
  createdById Int?               @map("createdBy")
  updatedBy   User?              @relation("Topic_updatedBy", fields: [updatedById], references: [id])
  updatedById Int?               @map("updatedBy")

  @@index([createdById])
  @@index([updatedById])
}

model EditorChoice {
  id          Int       @id @default(autoincrement())
  post        Post?     @relation("EditorChoice_post", fields: [postId], references: [id])
  postId      Int?      @map("post")
  sortOrder   Int?      @default(0)
  createdAt   DateTime?
  updatedAt   DateTime?
  createdBy   User?     @relation("EditorChoice_createdBy", fields: [createdById], references: [id])
  createdById Int?      @map("createdBy")
  updatedBy   User?     @relation("EditorChoice_updatedBy", fields: [updatedById], references: [id])
  updatedById Int?      @map("updatedBy")

  @@index([postId])
  @@index([createdById])
  @@index([updatedById])
}

model LifeGuide {
  id          Int       @id @default(autoincrement())
  post        Post?     @relation("LifeGuide_post", fields: [postId], references: [id])
  postId      Int?      @map("post")
  sortOrder   Int?      @default(0)
  createdAt   DateTime?
  updatedAt   DateTime?
  createdBy   User?     @relation("LifeGuide_createdBy", fields: [createdById], references: [id])
  createdById Int?      @map("createdBy")
  updatedBy   User?     @relation("LifeGuide_updatedBy", fields: [updatedById], references: [id])
  updatedById Int?      @map("updatedBy")

  @@index([postId])
  @@index([createdById])
  @@index([updatedById])
}

model Comment {
  id                  Int                  @id @default(autoincrement())
  content             String               @default("")
  language            CommentLanguageType?
  content_zh          String               @default("")
  content_en          String               @default("")
  content_vi          String               @default("")
  content_id          String               @default("")
  content_th          String               @default("")
  post                Post?                @relation("Comment_post", fields: [postId], references: [id])
  postId              Int?                 @map("post")
  member              Member?              @relation("Comment_member", fields: [memberId], references: [id])
  memberId            Int?                 @map("member")
  ip                  String               @default("")
  status              CommentStatusType?   @default(published)
  reactions           Reaction[]           @relation("Reaction_comment")
  reports             Report[]             @relation("Report_comment")
  parent              Comment?             @relation("Comment_parent", fields: [parentId], references: [id])
  parentId            Int?                 @map("parent")
  root                Comment?             @relation("Comment_root", fields: [rootId], references: [id])
  rootId              Int?                 @map("root")
  like                Member[]             @relation("Comment_like")
  published_date      DateTime?
  is_edited           Boolean              @default(false)
  is_active           Boolean              @default(true)
  createdAt           DateTime?
  updatedAt           DateTime?
  createdBy           User?                @relation("Comment_createdBy", fields: [createdById], references: [id])
  createdById         Int?                 @map("createdBy")
  updatedBy           User?                @relation("Comment_updatedBy", fields: [updatedById], references: [id])
  updatedById         Int?                 @map("updatedBy")
  from_Comment_parent Comment[]            @relation("Comment_parent")
  from_Comment_root   Comment[]            @relation("Comment_root")

  @@index([postId])
  @@index([memberId])
  @@index([parentId])
  @@index([rootId])
  @@index([createdById])
  @@index([updatedById])
}

model Reaction {
  id          Int              @id @default(autoincrement())
  member      Member?          @relation("Reaction_member", fields: [memberId], references: [id])
  memberId    Int?             @map("member")
  post        Post?            @relation("Reaction_post", fields: [postId], references: [id])
  postId      Int?             @map("post")
  comment     Comment?         @relation("Reaction_comment", fields: [commentId], references: [id])
  commentId   Int?             @map("comment")
  type        ReactionTypeType
  createdAt   DateTime?
  updatedAt   DateTime?
  createdBy   User?            @relation("Reaction_createdBy", fields: [createdById], references: [id])
  createdById Int?             @map("createdBy")
  updatedBy   User?            @relation("Reaction_updatedBy", fields: [updatedById], references: [id])
  updatedById Int?             @map("updatedBy")

  @@index([memberId])
  @@index([postId])
  @@index([commentId])
  @@index([createdById])
  @@index([updatedById])
}

model Bookmark {
  id          Int       @id @default(autoincrement())
  post        Post?     @relation("Bookmark_post", fields: [postId], references: [id])
  postId      Int?      @map("post")
  member      Member?   @relation("Bookmark_member", fields: [memberId], references: [id])
  memberId    Int?      @map("member")
  createdAt   DateTime?
  updatedAt   DateTime?
  createdBy   User?     @relation("Bookmark_createdBy", fields: [createdById], references: [id])
  createdById Int?      @map("createdBy")
  updatedBy   User?     @relation("Bookmark_updatedBy", fields: [updatedById], references: [id])
  updatedById Int?      @map("updatedBy")

  @@index([postId])
  @@index([memberId])
  @@index([createdById])
  @@index([updatedById])
}

model Poll {
  id                 Int          @id @default(autoincrement())
  title              String       @default("")
  title_zh           String       @default("")
  title_en           String       @default("")
  title_vi           String       @default("")
  title_id           String       @default("")
  title_th           String       @default("")
  post               Post?        @relation("Poll_post", fields: [postId], references: [id])
  postId             Int?         @map("post")
  expiresAt          DateTime?
  options            PollOption[] @relation("PollOption_poll")
  totalVotes         Int?         @default(0)
  createdAt          DateTime?
  updatedAt          DateTime?
  createdBy          User?        @relation("Poll_createdBy", fields: [createdById], references: [id])
  createdById        Int?         @map("createdBy")
  updatedBy          User?        @relation("Poll_updatedBy", fields: [updatedById], references: [id])
  updatedById        Int?         @map("updatedBy")
  from_PollVote_poll PollVote[]   @relation("PollVote_poll")

  @@index([postId])
  @@index([createdById])
  @@index([updatedById])
}

model PollOption {
  id                   Int        @id @default(autoincrement())
  text                 String     @default("")
  text_zh              String     @default("")
  text_en              String     @default("")
  text_vi              String     @default("")
  text_id              String     @default("")
  text_th              String     @default("")
  poll                 Poll?      @relation("PollOption_poll", fields: [pollId], references: [id])
  pollId               Int?       @map("poll")
  voteCount            Int?       @default(0)
  createdAt            DateTime?
  updatedAt            DateTime?
  createdBy            User?      @relation("PollOption_createdBy", fields: [createdById], references: [id])
  createdById          Int?       @map("createdBy")
  updatedBy            User?      @relation("PollOption_updatedBy", fields: [updatedById], references: [id])
  updatedById          Int?       @map("updatedBy")
  from_PollVote_option PollVote[] @relation("PollVote_option")

  @@index([pollId])
  @@index([createdById])
  @@index([updatedById])
}

model PollVote {
  id          Int         @id @default(autoincrement())
  poll        Poll?       @relation("PollVote_poll", fields: [pollId], references: [id])
  pollId      Int?        @map("poll")
  option      PollOption? @relation("PollVote_option", fields: [optionId], references: [id])
  optionId    Int?        @map("option")
  member      Member?     @relation("PollVote_member", fields: [memberId], references: [id])
  memberId    Int?        @map("member")
  createdAt   DateTime?
  updatedAt   DateTime?
  createdBy   User?       @relation("PollVote_createdBy", fields: [createdById], references: [id])
  createdById Int?        @map("createdBy")
  updatedBy   User?       @relation("PollVote_updatedBy", fields: [updatedById], references: [id])
  updatedById Int?        @map("updatedBy")

  @@index([pollId])
  @@index([optionId])
  @@index([memberId])
  @@index([createdById])
  @@index([updatedById])
}

model Content {
  id          Int                  @id @default(autoincrement())
  identifier  String               @unique @default("")
  content     String               @default("")
  language    ContentLanguageType?
  content_zh  String               @default("")
  content_en  String               @default("")
  content_vi  String               @default("")
  content_id  String               @default("")
  content_th  String               @default("")
  createdAt   DateTime?
  updatedAt   DateTime?
  createdBy   User?                @relation("Content_createdBy", fields: [createdById], references: [id])
  createdById Int?                 @map("createdBy")
  updatedBy   User?                @relation("Content_updatedBy", fields: [updatedById], references: [id])
  updatedById Int?                 @map("updatedBy")

  @@index([createdById])
  @@index([updatedById])
  @@map("Content")
}

model Report {
  id          Int               @id @default(autoincrement())
  post        Post?             @relation("Report_post", fields: [postId], references: [id])
  postId      Int?              @map("post")
  comment     Comment?          @relation("Report_comment", fields: [commentId], references: [id])
  commentId   Int?              @map("comment")
  reporter    Member?           @relation("Report_reporter", fields: [reporterId], references: [id])
  reporterId  Int?              @map("reporter")
  ip          String            @default("")
  reason      String            @default("")
  status      ReportStatusType? @default(pending)
  adminNotes  String            @default("")
  createdAt   DateTime?
  updatedAt   DateTime?
  createdBy   User?             @relation("Report_createdBy", fields: [createdById], references: [id])
  createdById Int?              @map("createdBy")
  updatedBy   User?             @relation("Report_updatedBy", fields: [updatedById], references: [id])
  updatedById Int?              @map("updatedBy")

  @@index([postId])
  @@index([commentId])
  @@index([reporterId])
  @@index([createdById])
  @@index([updatedById])
}

model ForbiddenKeyword {
  id          Int       @id @default(autoincrement())
  word        String    @unique @default("")
  note        String    @default("")
  isEnabled   Boolean   @default(true)
  createdAt   DateTime?
  updatedAt   DateTime?
  createdBy   User?     @relation("ForbiddenKeyword_createdBy", fields: [createdById], references: [id])
  createdById Int?      @map("createdBy")
  updatedBy   User?     @relation("ForbiddenKeyword_updatedBy", fields: [updatedById], references: [id])
  updatedById Int?      @map("updatedBy")

  @@index([createdById])
  @@index([updatedById])
}

model Video {
  id          Int       @id @default(autoincrement())
  url         String    @default("")
  coverImage  String    @default("")
  createdAt   DateTime?
  updatedAt   DateTime?
  createdBy   User?     @relation("Video_createdBy", fields: [createdById], references: [id])
  createdById Int?      @map("createdBy")
  updatedBy   User?     @relation("Video_updatedBy", fields: [updatedById], references: [id])
  updatedById Int?      @map("updatedBy")

  @@index([createdById])
  @@index([updatedById])
}

model Photo {
  id                       Int       @id @default(autoincrement())
  name                     String    @default("")
  file_id                  String?
  file_filesize            Int?
  file_width               Int?
  file_height              Int?
  file_extension           String?
  urlOriginal              String    @default("")
  altText                  String    @default("")
  caption                  String    @default("")
  width                    Int?
  height                   Int?
  uploadedBy               Member?   @relation("Photo_uploadedBy", fields: [uploadedById], references: [id])
  uploadedById             Int?      @map("uploadedBy")
  createdAt                DateTime?
  updatedAt                DateTime?
  createdBy                User?     @relation("Photo_createdBy", fields: [createdById], references: [id])
  createdById              Int?      @map("createdBy")
  updatedBy                User?     @relation("Photo_updatedBy", fields: [updatedById], references: [id])
  updatedById              Int?      @map("updatedBy")
  from_Member_avatar_image Member[]  @relation("Member_avatar_image")
  from_Post_heroImage      Post[]    @relation("Post_heroImage")

  @@index([uploadedById])
  @@index([createdById])
  @@index([updatedById])
  @@map("Image")
}

model Category {
  id                             Int       @id @default(autoincrement())
  title                          String    @default("")
  slug                           String    @unique @default("")
  summary                        String    @default("")
  priority                       Int       @default(0)
  createdAt                      DateTime?
  updatedAt                      DateTime?
  createdBy                      User?     @relation("Category_createdBy", fields: [createdById], references: [id])
  createdById                    Int?      @map("createdBy")
  updatedBy                      User?     @relation("Category_updatedBy", fields: [updatedById], references: [id])
  updatedById                    Int?      @map("updatedBy")
  from_Member_following_category Member[]  @relation("Member_following_category")

  @@index([createdById])
  @@index([updatedById])
}

model Tag {
  id          Int       @id @default(autoincrement())
  name        String    @unique @default("")
  createdAt   DateTime?
  updatedAt   DateTime?
  createdBy   User?     @relation("Tag_createdBy", fields: [createdById], references: [id])
  createdById Int?      @map("createdBy")
  updatedBy   User?     @relation("Tag_updatedBy", fields: [updatedById], references: [id])
  updatedById Int?      @map("updatedBy")

  @@index([createdById])
  @@index([updatedById])
}

enum MemberStatusType {
  active
  banned
}

enum MemberLanguageType {
  zh
  en
  vi
  id
  th
}

enum PostLanguageType {
  zh
  en
  vi
  id
  th
}

enum PostStatusType {
  published
  draft
  archived
  hidden
}

enum TopicLanguageType {
  zh
  en
  vi
  id
  th
}

enum CommentLanguageType {
  zh
  en
  vi
  id
  th
}

enum CommentStatusType {
  published
  hidden
}

enum ReactionTypeType {
  love
  like
  haha
  sad
  angry
  scared
  wow
}

enum ContentLanguageType {
  zh
  en
  vi
  id
  th
}

enum ReportStatusType {
  pending
  resolved
  dismissed
}
